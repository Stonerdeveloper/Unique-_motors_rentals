(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";let a=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>a],46897)},81418,51975,e=>{"use strict";var a=e.i(75254);let s=(0,a.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>s],81418);let t=(0,a.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],51975)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},71689,12426,71649,69074,73708,e=>{"use strict";var a=e.i(75254);let s=(0,a.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689);let t=(0,a.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426);let i=(0,a.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>i],71649);let r=(0,a.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>r],69074);let l=(0,a.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>l],73708)},71558,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(7471),i=e.i(71689),r=e.i(56909),l=e.i(31278),c=e.i(5125),n=e.i(46897),d=e.i(81418),o=e.i(12426),x=e.i(71649),p=e.i(51975),u=e.i(69074),m=e.i(73708),h=e.i(22016),g=e.i(18566);function f({params:e}){let{id:f}=(0,s.use)(e),b=(0,g.useRouter)(),[j,y]=(0,s.useState)(!0),[v,z]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[w,S]=(0,s.useState)(null),[M,C]=(0,s.useState)(""),[P,L]=(0,s.useState)({name:"",brand:"",type:"SUV",price_per_day:0,with_driver:!0,location:"Lagos",image_url:""});async function _(){let{data:e,error:a}=await t.supabase.from("cars").select("*").eq("id",f).single();e&&!a?(L(e),C(e.image_url),y(!1)):(alert("Vehicle not found"),b.push("/admin/cars"))}(0,s.useEffect)(()=>{_()},[f]);let U=async e=>{e.preventDefault(),z(!0);let a=P.image_url;if(w){k(!0);let e=w.name.split(".").pop(),s=`${Math.random()}.${e}`,i=`${s}`,{error:r}=await t.supabase.storage.from("car-images").upload(i,w);if(r){alert("Error uploading image: "+r.message),z(!1),k(!1);return}let{data:{publicUrl:l}}=t.supabase.storage.from("car-images").getPublicUrl(i);a=l}let{error:s}=await t.supabase.from("cars").update({...P,image_url:a}).eq("id",f);s?(alert("Error updating car: "+s.message),z(!1),k(!1)):b.push("/admin/cars")};return j?(0,a.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,a.jsx)(l.Loader2,{className:"animate-spin text-zinc-300",size:48})}):(0,a.jsxs)("div",{className:"p-8 max-w-4xl mx-auto space-y-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(h.default,{href:"/admin/cars",className:"p-3 bg-white border border-zinc-200 rounded-2xl hover:bg-zinc-50 transition-colors",children:(0,a.jsx)(i.ArrowLeft,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Vehicle"}),(0,a.jsxs)("p",{className:"text-muted text-xs",children:["Update specs and imagery for the ",P.brand," ",P.name,"."]})]})]})}),(0,a.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-zinc-200 rounded-3xl p-8 space-y-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold uppercase tracking-widest text-zinc-400 mb-6 flex items-center gap-2",children:[(0,a.jsx)(c.Car,{size:16})," Basic Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(p.Tag,{size:12})," Model Name"]}),(0,a.jsx)("input",{required:!0,type:"text",value:P.name,className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",onChange:e=>L({...P,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(p.Tag,{size:12})," Brand"]}),(0,a.jsx)("input",{required:!0,type:"text",value:P.brand,className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",onChange:e=>L({...P,brand:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(x.Type,{size:12})," Vehicle Type"]}),(0,a.jsxs)("select",{className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",value:P.type,onChange:e=>L({...P,type:e.target.value}),children:[(0,a.jsx)("option",{children:"SUV"}),(0,a.jsx)("option",{children:"Sedan"}),(0,a.jsx)("option",{children:"Bus"}),(0,a.jsx)("option",{children:"Luxury"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(o.DollarSign,{size:12})," Price Per Day (â‚¦)"]}),(0,a.jsx)("input",{required:!0,type:"number",value:P.price_per_day,className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",onChange:e=>L({...P,price_per_day:parseInt(e.target.value)})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-zinc-200 rounded-3xl p-8 space-y-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold uppercase tracking-widest text-zinc-400 mb-6 flex items-center gap-2",children:[(0,a.jsx)(n.MapPin,{size:16})," Service & Availability"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(n.MapPin,{size:12})," Primary Location"]}),(0,a.jsxs)("select",{className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",value:P.location,onChange:e=>L({...P,location:e.target.value}),children:[(0,a.jsx)("option",{children:"Lagos"}),(0,a.jsx)("option",{children:"Abuja"}),(0,a.jsx)("option",{children:"Port Harcourt"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(d.ShieldCheck,{size:12})," Service Mode"]}),(0,a.jsxs)("select",{className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl p-4 text-sm outline-none focus:ring-1 focus:ring-amber-500",value:P.with_driver.toString(),onChange:e=>L({...P,with_driver:"true"===e.target.value}),children:[(0,a.jsx)("option",{value:"true",children:"Professional Chauffeur Driven"}),(0,a.jsx)("option",{value:"false",children:"Self-Drive Policy"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex items-center gap-1",children:[(0,a.jsx)(m.Image,{size:12})," Vehicle Image"]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-48 h-32 bg-zinc-50 border-2 border-dashed border-zinc-200 rounded-2xl overflow-hidden flex items-center justify-center group hover:border-amber-500 transition-colors",children:[M?(0,a.jsx)("img",{src:M,alt:"Preview",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-zinc-400",children:[(0,a.jsx)(u.Upload,{size:24}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Upload PNG/JPG"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:e=>{let a=e.target.files?.[0];a&&(S(a),C(URL.createObjectURL(a)))}})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-zinc-500 font-medium",children:"Click the card to replace the current image. Leave blank to keep current."}),(0,a.jsx)("p",{className:"text-[10px] text-zinc-400 italic",children:"Images are stored securely on Supabase Storage."})]})]})]})]}),(0,a.jsx)("button",{disabled:v||N,type:"submit",className:"w-full flex items-center justify-center gap-2 py-5 bg-black text-white rounded-full font-bold hover:bg-zinc-800 transition-all shadow-xl disabled:opacity-50",children:v||N?(0,a.jsx)(l.Loader2,{className:"animate-spin",size:24}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{size:20}),(0,a.jsx)("span",{children:"Update Vehicle"})]})})]})]})}e.s(["default",()=>f])}]);